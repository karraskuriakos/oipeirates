(function(i,k){var j="addEventListener" in i;var m=false;if(k.readyState==="complete"){m=true}else{if(j){i.addEventListener("load",h,false)}}function h(){i.removeEventListener("load",h,false);m=true}var c=/\/ath(\/)?$/;var n=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/;var o;function f(p){o=o||new f.Class(p);return o}f.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzufügen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:"Um diese Web-App zum Home-Bildschirm hinzuzufügen, öffnen Sie das Menü und tippen dann auf <strong>Zum Startbildschirm hinzufügen</strong>. <small>Wenn Ihr Gerät eine Menütaste hat, lässt sich das Browsermenü über diese öffnen. Ansonsten tippen Sie auf %icon.</small>"},da_dk:{ios:"For at tilføje denne web app til hjemmeskærmen: Tryk %icon og derefter <strong>Føj til hjemmeskærm</strong>.",android:"For at tilføje denne web app til hjemmeskærmen, åbn browser egenskaber menuen og tryk på <strong>Føj til hjemmeskærm</strong>. <small>Denne menu kan tilgås ved at trykke på menu knappen, hvis din enhed har en, eller ved at trykke på det øverste højre menu ikon %icon.</small>"},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},es_es:{ios:"Para añadir esta aplicación web a la pantalla de inicio: pulsa %icon y selecciona <strong>Añadir a pantalla de inicio</strong>.",android:"Para añadir esta aplicación web a la pantalla de inicio, abre las opciones y pulsa <strong>Añadir a pantalla inicio</strong>. <small>El menú se puede acceder pulsando el botón táctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"},fi_fi:{ios:"Liitä tämä sovellus kotivalikkoon: klikkaa %icon ja tämän jälkeen <strong>Lisää kotivalikkoon</strong>.",android:"Lisätäksesi tämän sovelluksen aloitusnäytölle, avaa selaimen valikko ja klikkaa tähti -ikonia tai <strong>Lisää aloitusnäytölle tekstiä</strong>. <small>Valikkoon pääsee myös painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla yläkulmassa menu ikonia %icon.</small>"},fr_fr:{ios:"Pour ajouter cette application web sur l'écran d'accueil : Appuyez %icon et sélectionnez <strong>Ajouter sur l'écran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'écran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'écran d\'accueil</strong>. <small>Le menu peut-être accessible en appuyant sur le bouton "menu" du téléphone s\'il en possède un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin supérieur droit du navigateur %icon.</small>'},he_il:{ios:'<span dir="rtl">להוספת האפליקציה למסך הבית: ללחוץ על %icon ואז <strong>הוסף למסך הבית</strong>.</span>',android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},hu_hu:{ios:"Ha hozzá szeretné adni ezt az alkalmazást a kezdőképernyőjéhez, érintse meg a következő ikont: %icon , majd a <strong>Hozzáadás a kezdőképernyőhöz</strong> menüpontot.",android:"Ha hozzá szeretné adni ezt az alkalmazást a kezdőképernyőjéhez, a böngésző menüjében kattintson a <strong>Hozzáadás a kezdőképernyőhöz</strong> menüpontra. <small>A böngésző menüjét a következő ikon megérintésével tudja megnyitni: %icon.</small>"},it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:"Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l'icona %icon in alto a destra.</small>"},ja_jp:{ios:"このウェプアプリをホーム画面に追加するために%iconを押して<strong>ホーム画面に追加</strong>。",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ko_kr:{ios:"홈 화면에 바로가기 생성: %icon 을 클릭한 후 <strong>홈 화면에 추가</strong>.",android:"브라우저 옵션 메뉴의 <string>홈 화면에 추가</string>를 클릭하여 홈화면에 바로가기를 생성할 수 있습니다. <small>옵션 메뉴는 장치의 메뉴 버튼을 누르거나 오른쪽 상단의 메뉴 아이콘 %icon을 클릭하여 접근할 수 있습니다.</small>"},nb_no:{ios:"For å installere denne appen på hjem-skjermen: trykk på %icon og deretter <strong>Legg til på Hjem-skjerm</strong>.",android:"For å legge til denne webappen på startsiden åpner en nettlesermenyen og velger <strong>Legg til på startsiden</strong>. <small>Menyen åpnes ved å trykke på den fysiske menyknappen hvis enheten har det, eller ved å trykke på menyikonet øverst til høyre %icon.</small>"},pt_br:{ios:"Para adicionar este app à tela de início: clique %icon e então <strong>Tela de início</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},pt_pt:{ios:"Para adicionar esta app ao ecrã principal: clique %icon e depois <strong>Ecrã principal</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},ru_ru:{ios:'Чтобы добавить этот сайт на свой домашний экран, нажмите на иконку %icon и затем <strong>На экран "Домой"</strong>.',android:"Чтобы добавить сайт на свой домашний экран, откройте меню браузера и нажмите на <strong>Добавить на главный экран</strong>. <small>Меню можно вызвать, нажав на кнопку меню вашего телефона, если она есть. Или найдите иконку сверху справа %icon[иконка].</small>"},sv_se:{ios:"För att lägga till denna webbapplikation på hemskärmen: tryck på %icon och därefter <strong>Lägg till på hemskärmen</strong>.",android:"För att lägga till den här webbappen på hemskärmen öppnar du webbläsarens alternativ-meny och väljer <strong>Lägg till på startskärmen</strong>. <small>Man hittar menyn genom att trycka på hårdvaruknappen om din enhet har en sådan, eller genom att trycka på menyikonen högst upp till höger %icon.</small>"},uk_ua:{ios:"Щоб додати цей сайт на початковий екран, натисніть %icon, а потім <strong>На початковий екран</strong>.",android:"Щоб додати цей сайт на домашній екран, відкрийте меню браузера та виберіть <strong>Додати на головний екран</strong>. <small>Це можливо зробити, натиснувши кнопку меню на вашому смартфоні, якщо така є. Або ж на іконці зверху справа %icon.</small>"},zh_cn:{ios:"如要把应用程序加至主屏幕,请点击%icon, 然后<strong>添加到主屏幕</strong>",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"},zh_tw:{ios:"如要把應用程式加至主屏幕, 請點擊%icon, 然後<strong>加至主屏幕</strong>.",android:"To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon %icon.</small>"}};for(var e in f.intl){f.intl[e.substr(0,2)]=f.intl[e]}f.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:false,logging:false,modal:false,mandatory:false,autostart:true,skipFirstVisit:false,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,icon:true,message:"",language:"en_us",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:false,detectHomescreen:false};var l=i.navigator.userAgent;var g=i.navigator;d(f,{hasToken:k.location.hash=="#ath"||c.test(k.location.href)||n.test(k.location.search),isRetina:i.devicePixelRatio&&i.devicePixelRatio>1,isIDevice:(/iphone|ipod|ipad/i).test(l),isMobileChrome:l.indexOf("Android")>-1&&(/Chrome\/[.0-9]*/).test(l)&&l.indexOf("Version")==-1,isMobileIE:l.indexOf("Windows Phone")>-1,});f.isMobileSafari=f.isIDevice&&l.indexOf("Safari")>-1&&l.indexOf("CriOS")<0;f.OS=f.isIDevice?"ios":f.isMobileChrome?"android":f.isMobileIE?"windows":"unsupported";f.OSVersion=l.match(/(OS|Android) (\d+[_\.]\d+)/);f.OSVersion=f.OSVersion&&f.OSVersion[2]?+f.OSVersion[2].replace("_","."):0;f.isStandalone="standalone" in i.navigator&&i.navigator.standalone;f.isTablet=(f.isMobileSafari&&l.indexOf("iPad")>-1)||(f.isMobileChrome&&l.indexOf("Mobile")<0);f.isCompatible=(f.isMobileSafari&&f.OSVersion>=6)||f.isMobileChrome;var b={lastDisplayTime:0,returningVisitor:false,displayCount:0,optedout:false,added:false};f.removeSession=function(p){try{if(!localStorage){throw new Error("localStorage is not defined")}localStorage.removeItem(p||f.defaults.appID)}catch(q){}};f.doLog=function(p){if(this.options.logging){console.log(p)}};f.Class=function(q){this.doLog=f.doLog;this.options=d({},f.defaults);d(this.options,q);if(q&&q.debug&&(typeof q.logging==="undefined")){this.options.logging=true}if(q&&this.options.language){f.language=this.options.language&&this.options.language in f.intl?this.options.language:"en_us"}if(!j){return}this.options.mandatory=this.options.mandatory&&("standalone" in i.navigator||this.options.debug);this.options.modal=this.options.modal||this.options.mandatory;if(this.options.mandatory){this.options.startDelay=-0.5}this.options.detectHomescreen=this.options.detectHomescreen===true?"hash":this.options.detectHomescreen;if(this.options.debug){f.isCompatible=true;f.OS=typeof this.options.debug=="string"?this.options.debug:f.OS=="unsupported"?"android":f.OS;f.OSVersion=f.OS=="ios"?"8":"4"}this.container=k.documentElement;this.session=this.getItem(this.options.appID);this.session=this.session?JSON.parse(this.session):undefined;if(f.hasToken&&(!f.isCompatible||!this.session)){f.hasToken=false;a()}if(!f.isCompatible){this.doLog("Add to homescreen: not displaying callout because device not supported");return}this.session=this.session||b;try{if(!localStorage){throw new Error("localStorage is not defined")}localStorage.setItem(this.options.appID,JSON.stringify(this.session));f.hasLocalStorage=true}catch(s){f.hasLocalStorage=false;if(this.options.onPrivate){this.options.onPrivate.call(this)}}var p=!this.options.validLocation.length;for(var r=this.options.validLocation.length;r--;){if(this.options.validLocation[r].test(k.location.href)){p=true;break}}if(this.getItem("addToHome")){this.optOut()}if(this.session.optedout){this.doLog("Add to homescreen: not displaying callout because user opted out");return}if(this.session.added){this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");return}if(!p){this.doLog("Add to homescreen: not displaying callout because not a valid location");return}if(f.isStandalone){if(!this.session.added){this.session.added=true;this.updateSession();if(this.options.onAdd&&f.hasLocalStorage){this.options.onAdd.call(this)}}this.doLog("Add to homescreen: not displaying callout because in standalone mode");return}if(this.options.detectHomescreen){if(f.hasToken){a();if(!this.session.added){this.session.added=true;this.updateSession();if(this.options.onAdd&&f.hasLocalStorage){this.options.onAdd.call(this)}}this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");return}if(this.options.detectHomescreen=="hash"){history.replaceState("",i.document.title,k.location.href+"#ath")}else{if(this.options.detectHomescreen=="smartURL"){history.replaceState("",i.document.title,k.location.href.replace(/(\/)?$/,"/ath$1"))}else{history.replaceState("",i.document.title,k.location.href+(k.location.search?"&":"?")+"ath=")}}}if(!this.session.returningVisitor){this.session.returningVisitor=true;this.updateSession();if(this.options.skipFirstVisit){this.doLog("Add to homescreen: not displaying callout because skipping first visit");return}}if(!this.options.privateModeOverride&&!f.hasLocalStorage){this.doLog("Add to homescreen: not displaying callout because browser is in private mode");return}this.ready=true;if(this.options.onInit){this.options.onInit.call(this)}if(this.options.autostart){this.doLog("Add to homescreen: autostart displaying callout");this.show()}};f.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(q){var p=this.events[q.type];if(p){this[p](q)}},show:function(s){if(this.options.autostart&&!m){setTimeout(this.show.bind(this),50);return}if(this.shown){this.doLog("Add to homescreen: not displaying callout because already shown on screen");return}var q=Date.now();var p=this.session.lastDisplayTime;if(s!==true){if(!this.ready){this.doLog("Add to homescreen: not displaying callout because not ready");return}if(q-p<this.options.displayPace*60000){this.doLog("Add to homescreen: not displaying callout because displayed recently");return}if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount){this.doLog("Add to homescreen: not displaying callout because displayed too many times already");return}}this.shown=true;this.session.lastDisplayTime=q;this.session.displayCount++;this.updateSession();if(!this.applicationIcon){if(f.OS=="ios"){this.applicationIcon=k.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]')}else{this.applicationIcon=k.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]')}}var r="";if(typeof this.options.message=="object"&&f.language in this.options.message){r=this.options.message[f.language][f.OS]}else{if(typeof this.options.message=="object"&&f.OS in this.options.message){r=this.options.message[f.OS]}else{if(this.options.message in f.intl){r=f.intl[this.options.message][f.OS]}else{if(this.options.message!==""){r=this.options.message}else{if(f.OS in f.intl[f.language]){r=f.intl[f.language][f.OS]}}}}}r="<p>"+r.replace(/%icon(?:\[([^\]]+)\])?/gi,function(u,t){return'<span class="ath-action-icon">'+(!!t?t:"icon")+"</span>"});+"</p>";this.viewport=k.createElement("div");this.viewport.className="ath-viewport";if(this.options.modal){this.viewport.className+=" ath-modal"}if(this.options.mandatory){this.viewport.className+=" ath-mandatory"}this.viewport.style.position="absolute";this.element=k.createElement("div");this.element.className="ath-container ath-"+f.OS+" ath-"+f.OS+(f.OSVersion+"").substr(0,1)+" ath-"+(f.isTablet?"tablet":"phone");this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;";this.element.style.webkitTransform="translate3d(0,-"+i.innerHeight+"px,0)";this.element.style.transform="translate3d(0,-"+i.innerHeight+"px,0)";if(this.options.icon&&this.applicationIcon){this.element.className+=" ath-icon";this.img=k.createElement("img");this.img.className="ath-application-icon";this.img.addEventListener("load",this,false);this.img.addEventListener("error",this,false);this.img.src=this.applicationIcon.href;this.element.appendChild(this.img)}this.element.innerHTML+=r;this.viewport.style.left="-99999em";this.viewport.appendChild(this.element);this.container.appendChild(this.viewport);if(this.img){this.doLog("Add to homescreen: not displaying callout because waiting for img to load")}else{this._delayedShow()}},_delayedShow:function(p){setTimeout(this._show.bind(this),this.options.startDelay*1000+500)},_show:function(){var p=this;this.updateViewport();i.addEventListener("resize",this,false);i.addEventListener("scroll",this,false);i.addEventListener("orientationchange",this,false);if(this.options.modal){k.addEventListener("touchmove",this,true)}if(!this.options.mandatory){setTimeout(function(){p.element.addEventListener("click",p,true)},1000)}setTimeout(function(){p.element.style.webkitTransitionDuration="1.2s";p.element.style.transitionDuration="1.2s";p.element.style.webkitTransform="translate3d(0,0,0)";p.element.style.transform="translate3d(0,0,0)"},0);if(this.options.lifespan){this.removeTimer=setTimeout(this.remove.bind(this),this.options.lifespan*1000)}if(this.options.onShow){this.options.onShow.call(this)}},remove:function(){clearTimeout(this.removeTimer);if(this.img){this.img.removeEventListener("load",this,false);this.img.removeEventListener("error",this,false)}i.removeEventListener("resize",this,false);i.removeEventListener("scroll",this,false);i.removeEventListener("orientationchange",this,false);k.removeEventListener("touchmove",this,true);this.element.removeEventListener("click",this,true);this.element.addEventListener("transitionend",this,false);this.element.addEventListener("webkitTransitionEnd",this,false);this.element.addEventListener("MSTransitionEnd",this,false);this.element.style.webkitTransitionDuration="0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,false);this.element.removeEventListener("webkitTransitionEnd",this,false);this.element.removeEventListener("MSTransitionEnd",this,false);this.container.removeChild(this.viewport);this.shown=false;if(this.options.onRemove){this.options.onRemove.call(this)}},updateViewport:function(){if(!this.shown){return}this.viewport.style.width=i.innerWidth+"px";this.viewport.style.height=i.innerHeight+"px";this.viewport.style.left=i.scrollX+"px";this.viewport.style.top=i.scrollY+"px";var q=k.documentElement.clientWidth;this.orientation=q>k.documentElement.clientHeight?"landscape":"portrait";var p=f.OS=="ios"?this.orientation=="portrait"?screen.width:screen.height:screen.width;this.scale=screen.width>q?1:p/i.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){if(f.hasLocalStorage===false){return}if(localStorage){localStorage.setItem(this.options.appID,JSON.stringify(this.session))}},clearSession:function(){this.session=b;this.updateSession()},getItem:function(p){try{if(!localStorage){throw new Error("localStorage is not defined")}return localStorage.getItem(p)}catch(q){f.hasLocalStorage=false}},optOut:function(){this.session.optedout=true;this.updateSession()},optIn:function(){this.session.optedout=false;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},_preventDefault:function(p){p.preventDefault();p.stopPropagation()}};function d(r,q){for(var p in q){r[p]=q[p]}return r}function a(){if(k.location.hash=="#ath"){history.replaceState("",i.document.title,k.location.href.split("#")[0])}if(c.test(k.location.href)){history.replaceState("",i.document.title,k.location.href.replace(c,"$1"))}if(n.test(k.location.search)){history.replaceState("",i.document.title,k.location.href.replace(n,"$2"))}}i.addToHomescreen=f})(window,document);